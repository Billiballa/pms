<div class="table-view-container">
    <div class="container-bg"></div>
    <div class="table-container">
        <div class="table-title">
            <div class="table-name">{{viewName}}</div>
            <!-- <mat-form-field class="table-search">
                <mat-icon>Search</mat-icon>
                <input matInput placeholder="搜索名称..." (keyup)='updateFilter($event)'>
            </mat-form-field> -->
            <input
                class="table-search"
                type='text'
                placeholder='搜索名称...'
                (keyup)='updateFilter($event)'
            />
            <a mat-raised-button class="new-btn" routerLink="."><span>+</span>添加</a>
        </div>
        <div class="table-content">
            <ngx-datatable
                #table
                style="height: calc(100vh - 132px); margin-bottom: 32px;"
                class="material striped"
                [rows]='rows'
                [columns]="columns"
                [columnMode]="'force'"
                [headerHeight]="50"
                [footerHeight]="50"
                [rowHeight]="50"
                [scrollbarV]="true"
                [scrollbarH]="true">

                <!-- Row Detail Template -->
                <ngx-datatable-row-detail [rowHeight]="150" (toggle)="onDetailToggle($event)">
                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-row-detail-template>
                        <div style="padding-left:35px;">
                            <div><strong>{{row.name}}</strong></div>
                            <div>{{row.address.city}}, {{row.address.state}}</div>
                        </div>
                    </ng-template>
                </ngx-datatable-row-detail>

                <!-- Column Templates -->
                <ngx-datatable-column
                    [width]="50"
                    [resizeable]="false"
                    [sortable]="false"
                    [draggable]="false"
                    [canAutoResize]="false"
                    [frozenLeft]="true">
                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                        <a href="javascript:void(0)"
                            [class.datatable-icon-right]="!expanded"
                            [class.datatable-icon-down]="expanded"
                            title="详细内容"
                            (click)="toggleExpandRow(row)">
                        </a>
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column name="Index" width="80" [frozenLeft]="true">
                    <ng-template let-rowIndex="rowIndex" let-row="row" ngx-datatable-cell-template>
                        <strong>{{rowIndex}}</strong>
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column 
                    *ngFor="let col of columns"
                    [name]="col.name"
                    [prop]="col.prop"
                    [frozenLeft]="col.name==='Name'">
                    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                        <div *ngIf = "col.name==='Name'">{{value}}</div>
                        <div *ngIf = "col.name!=='Name'">{{value+"~"}}</div>
                    </ng-template>
                </ngx-datatable-column>
                
            </ngx-datatable>
        </div>
    </div>
</div>
